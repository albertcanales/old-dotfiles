#!/bin/bash

devpath="/dev/sda4"

# Outputs the mounted path the mounted path
function mounted_path {
    udisksctl info -b $devpath | grep MountPoints | cut -c 25-
}

# Mounts dades partition, sudo required for ntfsfix
function mount {
    if [[ -z $(mounted_path) ]]; then
        udisksctl mount -b $devpath
        if [[ -z $(mounted_path) ]]; then
            echo "Could not mount, running ntfsfix"
            sudo ntfsfix $devpath
        fi
    fi
}

# Unmounts dades partition
function umount {
    [[ $(mounted_path) ]] && udisksctl unmount -b $devpath;
} 

# If partition mounted, cd's to it
function cdades {
    [[ $(mounted_path) ]] && cd $(mounted_path)
}

while [[ $# -gt 0 ]]; do
    case $1 in
        m)
            mount
            ;;
        u)
            umount
            ;;
        p)
            mounted_path
            ;;
        c)
            cdades
   esac
   shift
done
